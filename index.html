<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>首页</title>
  <link rel="stylesheet" href="./style.css">
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="main.js"></script>
</head>
<body>
<h1>Your password is: __password__</h1>
<script>

  /*
window.xxx = function(result){
 if (result === 'success')
 {
     amount.innerText =  amnount.innerText - 1
 }
 else
 {
     alert('fail')
 }
}
button.addEventListener('click',function(e)
{
let script = document.createElement('script');
let functionName = 'frank'+ parseInt(Math.random()*100000);
window[functionName] =  function(result){
    if (result === 'success')
    {
        amount.innerText =  amnount.innerText - 1
    }
    else
    {
        alert('fail')
    }
}
script.src = 'http://happy.com:1234/pay?callback='+functionName
document.body.appendChild(script);     //只有把script放进body 才有效
//script 也有onload 和 onerror
//script.onload = function () {
//    alert('success')
//}
script.onload = function(e){ // 状态码是 200~299 则表示成功
    e.currentTarget.remove();
    delete window[functionName];
}
script.onerror = function(e){ // 状态码大于等于 400 则表示失败
    e.currentTarget.remove();
    delete window[functionName];
}
})
*/
</script>


</body>
</html>



